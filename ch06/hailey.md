# 프록시
## 리버스(Reverse) 프록시
- 웹 서버 앞에 위치하며 클라이언트에 요청을 대신 받아 웹 서버에 전달하고 웹 서버의 응답을 클라이언트에 전달
- 성능 향상 : 특정 서버에 부하가 일어나지 않도록 요청을 분산(로드밸런싱)
- 보안 강화 : 악성 요청 필터링, 접근 제한
- 캐싱 및 가속화 : 자주 사용되는 정적 파일들을 캐시에 저장
![image](https://github.com/hwyi21/202404-http-perfect-guide/assets/58624211/6a4a043d-2b8b-4d5f-9f16-09898c589834)

나무위키 :
`NAT 환경 또는 보안을 위해 분리된 인터넷망에 서버가 있을 경우에 내부 네트워크의 서버와 클라이언트를 이어주는 역할을 하며, 추가적으로 로드밸런싱 등을 담당하기도 한다. 클라우드플레어 서비스, NGINX 등이 리버스 프록시로 자주 이용된다.`

## NAT(Network Address Translation)
- 네트워크를 활용하는 모든 장비는 IP 주소가 필요함
- 하나의 public ip 로 요청이 들어오면 private ip 로 변환해서 요청을 함

- 사용 이유
  - IP 주소 절약: 하나의 공인 IP를 가지고 여러 사설망을 운영함으로써 IP 소비를 줄임
  - 보안 : 라우터 안쪽의 최종 목적지를 외부에서는 알 수 없기 때문에 내부에서 외부로의 요청은 가능하지만, 외부에서 내부로 요청은 불가능
![image](https://github.com/hwyi21/202404-http-perfect-guide/assets/58624211/2b052fd4-3821-47dd-b3b8-6705870bdf03)
** 프록시(L7)가 NAT(L4)의 기능을 하기 위해선 서버에 프록시 서버(웹서버, ex nginx)를 띄워야 하며, NAT는 그 장비 자체로 기능을 함

## DMZ
- 네트워크 중립 지역
- 외부에 서비스를 제공해야하는 상황에서 내부 자원을 보호하기 위해 내부 네트워크와 분리시킨 공간
- 내부에서 DMZ로의 접근은 가능하지만 DMZ에서 내부로의 접근은 불가능
- 외부 네트워크에서 DMZ로 가는 연결은 일반적으로 포트 주소 변환(PAT)을 통해 제어
  - PAT : NAT의 한 종류로 변환된 IP 주소로는 사내망 호스트들을 구분할 수 없기 때문에 포트번호를 부여하여 구분, 모든 포트가 사용 중인 경우 PAT 사용 불가
- 보안 상의 이유로 Reverse Proxy 서버를 DMZ 에 위치 시키고 실제 서비스 서버는 내부망에 위치시킴으로 프록시 서버만 내부에 있는 서비스 서버와 통신해서 결과를 클라이언트에게 제공하는 방식으로 서비스를 제공
![image](https://github.com/hwyi21/202404-http-perfect-guide/assets/58624211/bdfe5e42-247c-4974-aa27-1b0c04e9649b)