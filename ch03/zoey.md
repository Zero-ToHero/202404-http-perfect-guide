## 3.2 메시지의 각 부분

- 시작줄, 헤더, 본문

### 시작줄

요청 메세지의 형식

```
<메서드> <요청 URL> <버전>
<헤더>

<엔티티 본문>
```

- HTTP 메서드 : 서버가 수행해야 할 동작

응답 메세지의 형식

```
<버전> <상태 코드> <사유 구절>
<헤더>

<엔티티 본문>
```

- 상태 코드 : 요청의 성공여부를 알려 줌
- 사유 구절 : 상태코드에 대한 설명

- **버전 번호**
    - HTTP 애플리케이션들이 자신이 따르는 프로토콜의 버전을 상대방에게 말해주기 위한 수단
    - 버전 번호는 어떤 애플리케이션이 지원하는 가장 높은 HTTP 버전을 가리킨다.
        - 응답의 프로토콜 버전이 HTTP/1.1 → 응답을 보낸 애플리케이션이 HTTP/1.1 까지 이해할 수 있음
    - HTTP/x.y 버전을 비교할 때는 따로따로 비교
        - ex) HTTP/2.22 vs HTTP/2.3 → 2.22 > 2.3

### **헤더**

- HTTP 헤더 분류
    - 일반헤더 : 요청과 응답 양쪽에 모두 나타날 수 있음
        - 현재 버전의 HTTP/1.1 명세에서는 헤더를 `일반 헤더`로 구체적으로 분류하지 않고, 컨텍스트에 따라 간단히 [response](https://developer.mozilla.org/ko/docs/Glossary/Response_header) 또는 [request 헤더](https://developer.mozilla.org/ko/docs/Glossary/Request_header)라고 한다.
    - 요청헤더 : 요청에 대한 부가 정보를 제공
    - 응답헤더 : 응답에 대한 부가 정보를 제공
    - Entity 헤더 : 본문 크기와 콘텐츠 혹은 리소스 그 자체를 서술
        - HTTP/1.1 명세는 더 이상 엔티티, 엔티티 헤더 또는 엔티티 본문을 참조하지 않음. 일부 필드는 이제 [Representation header](https://developer.mozilla.org/ko/docs/Glossary/Representation_header) 필드라고 한다.
        - 표현 헤더
            - HTTP 메시지 본문으로 전송된 리소스의 특정 '표현'을 설명하는 [HTTP 헤더](https://developer.mozilla.org/ko/docs/Glossary/HTTP_header)입니다.
            - Content-Type, Content-Encoding, Content-Language, Content-Location
    - 확장 헤더 : 명세에 정의 되지 않은 새로운 헤더

    [General 헤더 - MDN Web Docs 용어 사전: 웹 용어 정의 | MDN](https://developer.mozilla.org/ko/docs/Glossary/General_header)

## 3.3 메서드

### safe method

- 서버 상태를 변경하지 않는 메서드 즉, 읽기 작업을 하는 method
- `GET`, `HEAD`

### HEAD

- GET처럼 동작하지만, 서버는 본문없이 헤더만 반환한다.
- HEAD를 사용하면
    - 리소스를 가져오지 않고 헤더만 조사할 수 있게 한다.
    - 응답의 상태코드를 통해 개체 존재여부를 확인할 수 있다.
    - 헤더를 확인해서 리소스가 변경됐는지 검사할 수 있다.

### TRACE

- 주로 웹 서버와 프록시 서버 간의 통신을 디버깅하거나 요청 및 응답의 변형을 추적하는 데 사용한다.
- 목적지 서버에서 루프백 진단을 시작한다. 요청 전송의 마지막 단계에 있는  서버는 자신이 받은 요청 메세지를 본문에 넣어 TRACE 응답을 되돌려준다.

### OPTIONS

- 서버에게 특정 리소스에 대해 어떤 메서드가 지원되는 지 물어보고, 서버는 리소스에 대해 지원하는 메서드 목록을 반환한다.

### POST vs PUT vs PATCH

- POST는 새로운 리소스를 생성할 때, PUT은 전체 리소스를 업데이트할 때,  PATCH는 리소스의 일부를 업데이트할 때 사용한다.

| POST | PUT | PATCH |
| --- | --- | --- |
| - 클라이언트가 서버에 새로운 리소스를 생성할 때 사용<br> - 요청할 때마다 새로운 리소스 생성 | - 클라이언트가 리소스를 서버에 업로드하거나 새로 만들거나 수정할 때 사용<br> - 클라이언트가 리소스의 전체 를 서버로 전송하여 해당 리소스를 업데이트 | - 클라이언트가 리소스의 일부만 업데이트할 때 사용 |
| 클라이언트가 /user 엔드포인트로 POST 요청을 보내면 서버는 새로운 유저를 생성한다. | 클라이언트가 /user/1 엔드포인트로 PUT 요청을 보내면 서버는 해당 엔드포인트에 유저의 전체 속성을 업데이트 | 클라이언트가 /user/1 엔드포인트로 PATCH 요청을 보내면 서버는 해당 유저의 일부 정보만을 업데이트 |

## 3.4 상태코드

### 정보성 상태코드 : 100 - 199

- 100 : Continue
    - 클라이언트가 서버에게 요청 본문을 전송하기 전에 서버로부터 추가 정보를 기다리거나, 서버가 요청을 수락했음을 알리는 데 사용된다.
- 101 : Switching protocols

### 성공 상태코드 : 200 - 299

### 리다이렉션 상태코드 : 300 - 399

- 리다이렉션 상태코드는 클라이언트가 요청한 리소스가 다른곳으로 옮겨졌을 때 리소스가 옮겨졌으며, 어디로 이동했는지 알려주기위해 사용한다.
- 리소스에 대한 애플리케이션의 로컬 복사본이 원래 서버와 비교했을 때 유효한지 확인하기 위해 사용된다.

### 클라이언트 에러 상태코드 : 400 - 499

- 클라이언트가 서버가 다룰 수 없는 리소스를 보내거나, 존재하지 않는 URL을 요청하는 등 클라이언트 측에서 잘못된 요청을 했을 때 사용된다.

### 서버 에러 상태코드 : 500 - 599

- 클라이언트에서는 올바른 요청을 보냈지만 서버 자체에서 에러가 발생하는 경우
