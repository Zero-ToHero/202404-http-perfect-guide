# Base64

- 모든 정보를 64진수로 표시한다는 것
- 컴퓨터는 2진수를 사용하니까
- 2^6 = 64, 6비트 2진수가 필요함
- 근데 컴퓨터 사이언스에서 가장 기본 단위는 8비트씩 엮어진 바이트를 사용한다.
- base64에서는 6비트가 필요하고 컴퓨터는 8비트가 필요하여 둘의 최소 공배수인 24비트 단위가 필요함

> base64는 3바이트 단위마다(24비트 마다) 6비트씩 쪼개서, 6비트 문자 4개로 만드는 것

## 인코딩

### 기본 원리

1. 이진 데이터를 8bit 작은 조각으로 나눈다. (이진 데이터 분할)
2. 그 조각들을 다 이어서 6bit로 나누고, 해당하는 글자로 바꾼다. (아스키 텍스트 매핑)
3. 원본 데이터의 길이가 3의 배수가 아니라면 '=' 기호로 채워서 길이를 맞춘다. (패딩, 변환 된 후에는 4의 배수로 맞춘다,)

### Hello, World! 예제

```js
btoa('Hello, World!') // 'SGVsbG8sIFdvcmxkIQ=='
```

1. H는 아스키 코드에서 72에 해당된다.

    ```js
    "H".charCodeAt(0) // 72
    ```

2. 1번에 해당하는 이진수를 구한다.

    ```js
    "H".charCodeAt(0).toString(2) // 01001000
    ```

3. 2번의 이진수에 해당하는 값을 구함

| Base64 값 | 0부터 63까지의 값 |
|-----------|-------------------|
| A         | 0                 |
| B         | 1                 |
| ...       | ...               |
| S         | 18                |
| ...       | ...               |
| a         | 26                |
| b         | 27                |
| ...       | ...               |
| 9         | 61                |
| +         | 62                |
| /         | 63                |

```text
1. "01001000"을 6bit로 나눈다, -> "010010"과 "00" 
2. 나눈것중 뒤의 것은 버리고 "010010"를 10진수로 변환 -> 18
3. 위의 표에서 18은 S 

4. 2에서 버린 00을 다음것과 합쳐서 6비트로 맞춤
5. 반복..
```

```text
"H" ->  01001000
"e" ->  01100101
"l" ->  01101100
"l" ->  01101100
"o" ->  01101111
"," ->  00101100
" " ->  00100000
"W" ->  01010111
"o" ->  01101111
"r" ->  01110010
"l" ->  01101100
"d" ->  01100100
"!" ->  00100001
```

```text
"010010", 
"000110", 
"010101", 
"100110", 
"011011", 
"000110", 
"110011", 
"011011", 
"011011", 
"000110", 
"100000", 
"101011", 
"011110", 
"011011", 
"011100", 
"011100", 
"100000", 
"100001"
```

```text
"010010" -> "S"
"000110" -> "G"
"010101" -> "V"
"100110" -> "Z"
"011011" -> "b"
"000110" -> "G"
"110011" -> "z"
"011011" -> "b"
"011011" -> "b"
"000110" -> "G"
"100000" -> "I"
"101011" -> "V"
"011110" -> "x"
"011011" -> "m"
"011100" -> "e"
"011100" -> "e"
"100000" -> "I"
"100001" -> "B"
```

```js
"Hello, World!" // 원본데이터가 13글자이므로 3배 배수의 맞추기 위해 '=' 2개를 추가함

"SGVsbG8sIFdvcmxkIQ=="
```
