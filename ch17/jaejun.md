### 1. **서버 측 트랜스코딩**

서버가 클라이언트의 요청에 맞는 특정 형식의 문서를 즉시 제공할 수 없는 경우, 서버는 기존의 문서를 변환하여 클라이언트에게 적절한 형태로 제공한다.

- **비디오 스트리밍**: 사용자가 1080p 영상을 요청했지만 서버에 4K 영상만 있는 경우, 서버는 4K 영상을 1080p로 변환하여 사용자에게 제공.
- **이미지 변환**: 클라이언트가 특정 해상도의 이미지를 요청했지만 서버에 그 해상도의 이미지가 없는 경우, 서버는 기존 이미지를 요청된 해상도로 변환.
- **텍스트 문서**: 클라이언트가 특정 파일 형식(예: PDF)을 요청했지만 서버에 해당 형식의 문서가 없는 경우, 서버는 기존 문서(예: Word 파일)를 PDF로 변환.

- **원본 비디오 업로드**: 비디오 스트리밍 서비스는 콘텐츠 제공자로부터 고화질의 원본 비디오 파일을 받습니다. 이 파일은 보통 고해상도(예: 4K)입니다.
- **트랜스코딩**: 이 원본 비디오 파일을 다양한 해상도와 비트레이트로 변환합니다. 예를 들어, 4K, 1080p, 720p, 480p 등의 해상도로 여러 가지 버전의 비디오 파일을 생성합니다. 이 과정에서 H.264, H.265와 같은 다양한 코덱을 사용하여 파일 크기를 최적화합니다.
- **S3에 저장**: 이렇게 변환된 비디오 파일들은 AWS S3와 같은 클라우드 스토리지에 저장됩니다.
- **적응형 스트리밍**: 사용자가 넷플릭스에 접속하여 비디오를 스트리밍하려고 할 때, 넷플릭스는 사용자의 디바이스와 네트워크 상태를 감지합니다. 예를 들어, 사용자가 스마트폰을 사용하고 있고 네트워크가 느리다면 480p 해상도의 비디오를 전송하고, 고속 인터넷에 연결된 스마트 TV를 사용하고 있다면 4K 해상도의 비디오를 전송합니다.
- **스트리밍**: 사용자는 자신의 디바이스와 네트워크 상태에 맞게 최적화된 비디오 스트림을 실시간으로 받습니다. 이 과정에서 비디오의 품질은 네트워크 상태에 따라 동적으로 조절됩니다.

https://netflixtechblog.com/high-quality-video-encoding-at-scale-d159db052746

```jsx
from flask import Flask, request, send_file
import subprocess

app = Flask(__name__)

@app.route('/transcode', methods=['GET'])
def transcode():
    input_file = request.args.get('input_file')
    output_file = 'output_1080p_video.mp4'
    
    # FFmpeg 명령어 실행
    subprocess.run(['ffmpeg', '-i', input_file, '-s', 'hd1080', '-c:v', 'libx264', '-crf', '23', '-preset', 'fast', output_file])
    
    # 변환된 파일 전송
    return send_file(output_file, as_attachment=True)

if __name__ == '__main__':
    app.run(debug=True)

```