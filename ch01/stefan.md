## HTTP 개관

### HTTP: 인터넷의 멀티미디어 배달부
- 다양한 형식의 데이터가 인터넷에서 돌아다닌다.
- HTTP는 이러한 데이터들을 주고 받을 수 있도록하는 통신 규약이다.
- HTTP는 신뢰성 있는 데이터 전송 프로토콜을 통해서 데이터의 무결성을 보장한다.

### 웹 클라이언트와 서버
- 웹 서버는 웹 컨텐츠를 관리하고 클라이언트 요청에 따라 HTTP응답으로 돌려준다.
- 사용자가 `www.naver.com/index.html`로 접근하면 브라우저는 `www.naver.com`로 요청을 보내고 `index.html`이라는 리소스를 찾고 이에 대한 내용을 HTTP응답에 실어서 보내준다.

### 리소스
- 서버가 제공하는 웹 컨텐츠의 구성 요소를 의미한다.
- 웹서버 파일 시스템의 정적 파일일수도 있고 컨텐츠를 생성하는 프로그램일 수도 있다. 어떤 종류의 컨텐츠 소수도 리소스가 될 수 있다.

#### 미디어 타입
- 인터넷은 매우 많은 수의 데이터 타입을 다룬다.
- 따라서 HTTP는 웹에서 전송되는 객체에 각각 `MIME`라는 타입의 `데이터 포멧 라벨`을 붙인다.
- `MIME(Multipurpose Internet Mail Extensions)`는 사선(/)으로 구분된 주 타입과 부 타입으로 나뉜다.
  - 예시) `text/html` , `text/plain`, `image/jpeg`, `image/png` ..

#### URI
- `URL`을 이용하여 서버 리소스 이름을 고유하게 식별하고 위치를 지정할 수 있다.
- URI는 `URL`과 `URN`이라는 두 종류가 있다.

#### URL
- URL은 가장 범용적으로 사용하는 리소스 식별자이다.
- URL은 리소스의 고유한 위치를 알려준다.
- 리소스의 위치가 변경되면 URL도 바뀌어야한다.

#### URN
- 리소스 위치가 변경되더라도 고유하다.
- 리소스가 이름을 변하지 않게 유지하는 한, 여러 종류의 네트워크 접속 프로토콜로 접근할 수 있다.
- 현재 실험중인 상태라 상용화까지는 시간이 더 걸린다.

### 트랜잭션
- 요청과 응답으로 구성되어있다.
- 트랜잭션은 HTTP 메시지를 통해 이루어진다.

#### 메서드
- 모든 HTTP 요청 메시지는 한개의 메서드를 갖는다.
- 메서드를 통해 서버에게 어떤 동작이 필요한지 말해준다.
  | HTTP 메서드 | 설명                                 |
  |----------|------------------------------------|
  | GET      | 서버에서 클라로 지정한 리소스를 보내라              |
  | PUT      | 클라에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라 |
  | POST     | 클라 데이터를 서버로 보내라                    |
  | DELETE   | 지정한 리소스를 서버에서 삭제해라                 |
  | HEAD     | 지정한 리소스에 대한 응답에서 HTTP 헤더 부분만 보내라   |

#### 상태 코드
- 모든 응답 메시지는 상태 코드를 포함한다.
- 클라이언트의 요청에 따라 응답이 어떻게 처리되었는지를 알려준다.
- [HTTP 상태 코드 정리 | 와탭 블로그](https://www.whatap.io/ko/blog/40/)

#### 웹페이지는 여러 객체로 이루어질 수 있다.
- 예시로 페이지 하나는 여러 이미지, 동영상, 오디오, 텍스트 등으로 이뤄진다.
- 서버에서 받은 html 내부에는 여러 리소스를 요청하는 부분이 존재한다.
  ![](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202024-04-22%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2012.19.52.png)<!-- {"width":555} -->
### 메시지
- HTTP 메시지는 시작줄/헤더/본문으로 구성된다.
- 시작줄
  - 요청: `메소드 + 리소스`로 무엇을 해야하는지 나타낸다.
  - 응답:  `상태 코드 + 상태 메시지`를 통해서 무엇을 했는지 나태난다.
- 헤더
  - `콜론(:)`으로 구분된 key-value 형태로 존재한다.
  - 빈 줄로 끝난다.
  - HTTP 요청/응답에 대한 메타 정보를 담고 있다.
- 본문
  - 요청: 클라이언트가 서버로 전달할 데이터를 보여준다.
  - 응답: 서버가 클라이언트에게 전달할 데이터를 보여준다.

![](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202024-04-22%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2012.26.59.png)

### TCP 커넥션
#### TCP/IP
- HTTP는 애플리케이션 계층 프로토콜
- 네트워크 통신의 세부사항에는 신경 쓰지 않는다.
- TCP에게 네트워크 통신의 역할을 맡긴다.
- TCP는 통신하는 단말 간 연결을 수립하고 데이터를 전송하기 때문에 신뢰성이 보장된다.
  - 오류없는 데이터 전송
  - 보낸 순서대로 도착
  - 조각나지 않는 데이터 스트림
- TCP/IP는 TCP와 IP가 층을 이루는 패킷 교환 네트워크 프로토콜이다.
- 연결을 확립하는건 네트워크 계층인 IP가, 데이터 전송은 전송 계층인 TCP가 담당한다.

#### 접속, IP 주소 그리고 포트번호
- IP주소와 포트번호를 통해 통신 단말 간 연결을 수립한다.
  - 도메인 이름이라면 DNS를 통해 IP 주소로 변환한다.
  - 포트번호가 없다면 기본값인 80으로 판단한다.

### 웹의 구성요소
#### 프록시
- 클라와 서버 사이에 위치한 HTTP 중개자
- 클라에서 서버 사이의 모든 트래픽을 필터링한다.
- 주로 보안을 위해 사용된다.
#### 캐시
- 많이 찾는 데이터를 클라이언트와 가까운 곳에 저장해두는 HTTP 프록시 서버이다.
- 속도 향상, 프라이버시 보호 등이 주된 목적이다.
#### 게이트웨이
- 다른 애플리케이션과 연결된 특별한 웹서버이다.
- 주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용한다.
- 리소스를 가지고 있는 진짜 서버인 것처럼 동작한다.
#### 터널
- HTTP통신을 전달하기만 하는 특별한 프록시
- 데이터를 열어보지 않고 그대로 전달한다.
- 대표적으로 암호화된 SSL 트래픽을 HTTP로 전송하는 역할하는 것이 있다.
#### 에이전트
- HTTP 요청을 만들어주는 클라이언트 프로그램
- 브라우저, 웹로봇 or 스파이더 등이 있다.