# 09. 웹 로봇

## **크롤링과 스크래핑**

![https://velog.velcdn.com/images%2Fhedakim%2Fpost%2F6fceafc0-64d7-4674-b718-5bfde45ab600%2F%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C.png](https://velog.velcdn.com/images%2Fhedakim%2Fpost%2F6fceafc0-64d7-4674-b718-5bfde45ab600%2F%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C.png)

### **크롤링(Crawling)**

크롤링은 웹 크롤러가 **웹사이트를 탐색하며 링크를 따라가면서 웹페이지를 수집하는 과정**이다.<br>
크롤러는 **검색 엔진에서 주로 사용**되며, 웹사이트의 구조와 콘텐츠를 이해하고 **인덱스를 생성**하는 데 도움을 준다.

- **특징**
    - **자동화된 탐색**: 크롤러는 웹페이지의 **링크를 따라 자동으로 탐색**한다.
    - **데이터 수집**: `웹사이트 전체` 또는 `대규모의 웹페이지` **데이터를 수집**한다.
    - **주로 검색 엔진에 사용**: 검색 엔진은 크롤러를 사용해 **웹 전체의 데이터를 수집하고 인덱스를 생성**한다.

### **스크래핑(Scraping)**

스크래핑은 웹페이지의 **특정 데이터나 정보를 추출하는 과정**이다.<br>
스크래핑은 크롤링의 일부로 진행될 수도 있지만, **주로 특정한 정보를 얻기 위해** 웹페이지의 내용을 **파싱하고 필요한 데이터만을 추출하는 데 중점**을 둔다.

- **특징**
    - **데이터 추출**: 특정 웹페이지나 웹 애플리케이션에서 **필요한 데이터를 추출**한다.
    - **목표 지향적**: 특정한 정보나 데이터를 얻기 위해 **웹페이지의 구조를 분석**한다.
    - **다양한 응용 분야**: 가격 비교, 데이터 분석, 리서치, 자동화된 보고서 생성 등에 사용된다.

### 크롤링 vs 스크래핑

|  | 크롤링 | 스크래핑 |
| --- | --- | --- |
| 목적 | 웹페이지를 자동으로 탐색하고 수집하는 과정에 중점 | 특정 데이터를 추출하는 데 중점 |
| 범위 | 일반적으로 대규모의 웹페이지를 대상 | 특정 페이지나 데이터 요소에 집중 |
| 사용 사례 | 주로 검색 엔진에서 인덱스를 생성하는 데 사용 | 특정 데이터를 추출하고 분석하는 데 사용 |

<br>

## **크롤링의 합법과 불법의 기준**

> “정보통신망법 제48조 정보통신망 침해행위 금지”누구든지 정당한 접근권한 없이 또는 허용된 접근권한을 넘어 정보통신망에 침입하여서는 아니된다
> 
- 수집한 데이터를 **영리적인, 상업적인 용도로 활용할 때 주의**해야한다.
- 스크랩핑 및 크롤링을 시도하면서 **상대에게 피해를 입히지 않도록 주의**해야한다.
- 401, 403 에러 등이 나온다면 **접근 권한이 없거나 금지하는 것이기 때문에 반복적인 행동을 하지 않도록 주의**해야한다.
- `robots.txt`를 통해 **접근범위가 어디까지 가능한지 확인**해야한다.
    - [구글 검색센터 Robots.txt 소개](https://developers.google.com/search/docs/crawling-indexing/robots/intro?hl=ko)
    - [구글 robots.txt](https://www.google.co.kr/robots.txt)
    - https://searchadvisor.naver.com/guide/seo-basic-robots
    - 해당 사이트는 특정 봇 외에는 접근 불가
        ```
        User-agent: *
        Disallow: /

        User-agent: Googlebot
        User-agent: Cowbot
        User-agent: NaverBot
        User-agent: Yeti
        User-agent: Daumoa
        Disallow: /admin/
        Disallow: /config/
        Disallow: /data/
        Disallow: /module/
        Disallow: /tmp/
        ```

<br>

## **정적크롤링과 동적크롤링**

각각의 방식은 웹페이지의 로딩 및 콘텐츠 제공 방식에 따라 다르다.

### **정적 크롤링 (Static Crawling)**

정적 크롤링은 서버에서 **HTML 문서가 완전히 렌더링된 상태로 제공되는 웹페이지를 크롤링**하는 방식이다.<br>
즉, 크롤러가 요청한 웹페이지의 HTML 소스 코드가 서버에서 바로 제공되는 경우를 말한다.

- **특징**
    - **HTML 소스 코드 분석**: 크롤러는 서버에서 받은 HTML 소스 코드를 분석하여 **필요한 데이터를 추출**한다.
    - **단순한 구조**: 정적 웹페이지는 비교적 구조가 단순하고, **서버에서 클라이언트로 직접 콘텐츠를 전달**한다.
    - **적용 사례**: 블로그, 뉴스 사이트 등 `정적 콘텐츠`가 많이 사용.

### **동적 크롤링 (Dynamic Crawling)**

동적 크롤링은 JavaScript 등 클라이언트 측 스크립트에 의해 콘텐츠가 로딩되고 렌더링되는 웹페이지를 크롤링하는 방식이다.<br>이러한 웹페이지는 초기 로딩 시 기본 HTML만 제공하고, 나머지 콘텐츠는 클라이언트 측에서 추가로 불러오는 형태다.

- **특징**
    - **JavaScript 실행**: 크롤러가 웹페이지의 JavaScript를 실행하여 동적으로 로딩되는 콘텐츠를 가져온다.
    - **복잡한 구조**: 동적 웹페이지는 클라이언트 측 스크립트에 의해 다양한 형태로 렌더링되므로, 정적 웹페이지에 비해 상대적으로 **구조가 더 복잡**합니다.
    - **복잡한 구조**: 동적 웹페이지는 클라이언트 측 스크립트에 의해 다양한 형태로 렌더링되므로, 정적 웹페이지에 비해 상대적으로 **구조가 더 복잡**합니다.
    - **적용 사례**: 소셜 미디어, SPA(Single Page Application), e-커머스 사이트 등 `동적인 콘텐츠`가 많이 사용

### 정적 크롤링 vs 동적 크롤링

|  | 정적 크롤링 | 동적 크롤링 |
| --- | --- | --- |
| 콘텐츠 로딩 방식 | 서버에서 제공하는 완전한 HTML 문서를 직접 크롤링 | 클라이언트 측에서 JavaScript가 실행되어 로딩되는 콘텐츠를 크롤링 |
| 복잡성 | 비교적 단순한 HTML 구조를 다룬다. | JavaScript 실행과 DOM 변화를 처리해야 하므로 더 복잡하다. |
| 도구와 기술 | 단순한 HTTP 요청(예 : urllib, requests)과 HTML 파싱 도구(예: BeautifulSoup)를 사용한다. | 브라우저 자동화 도구(예: Selenium, Puppeteer)를 사용하여 JavaScript 실행 후의 페이지를 크롤링한다. |
| 속도 | 빠르다 | 정적 크롤링에 비해 상대적으로 느리다 |
| 특징 | 수집한 텍스트 데이터를 직관적으로 빠르게 확인 가능하다 | 실제로 동작하는 과정(클릭, 입력 등) 확인을 통해 디버깅하기 좋다 |