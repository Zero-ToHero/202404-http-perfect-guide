# HPACK

- 헤더 압축 알고리즘
- 명세에 정의된 헤더 압축 방법으로 압축된 뒤 헤더 블록 조각들로 쪼개져서 전송된다.
- 받는 쪽에서는 이 조각들을 이은 뒤 압축을 풀어 원래의 헤더 집합으로 복원한다.

- <https://datatracker.ietf.org/doc/html/rfc7541>

## Huffman coding

- 무손실 압축 알고리즘, 심볼의 출현빈도를 기준으로 코드를 부여
- 자주 출현하는 짧게, 적게 출현하면 긴 코드 부여

```text
AABBAC (6byte 문자열)

(A, 3) (B, 2) (C, 1)

A -> 0
B -> 10
C -> 11

A(0)A(0)B(10)B(10)A(0)C(11)

001010011 9bit

48bit -> 9bit 압축
```

```text
# 이진 트리

CDDCACBCBCCCBBCDA (34 byte 문자열) 

# 심볼, 횟수
(A, 2) (B, 4) (C, 8) (D, 3)

# 빈도수로 정렬
(C, 8) (B, 4) (D, 3) (A, 2)

# 가장 뒤의 두 그룹을 묶는다
(C, 8) (B, 4) ([(D, 3) (A, 2)], 5)

# 빈도수로 정렬
(C, 8) ([(D, 3) (A, 2)], 5) (B, 4)

# 가장 뒤의 두 그룹을 묶는다 
(C, 8) (([(D, 3) (A, 2)], 5) (B, 4), 9)

# 빈도수로 정렬
(([(D, 3) (A, 2)], 5) (B, 4), 9) (C, 8) 

# 두 그룹을 묶는다
((([(D, 3) (A, 2)], 5) (B, 4), 9) (C, 8), 17) 


                                 17
                            /          \
                         9            (C, 8)
                    /         \         
                  5         (B, 4)
             /         \         
          (D, 3)     (A, 2)

# 완성된 트리에서 빈도가 큰 트리에 0을 작은 트리에 1을 부여한다.
((([(D, 3<0>) (A, 2<1>)], 5<0>) (B, 4<1>), 9<0>) (C, 8<1>), 17) 

                                 17
                            /          \
                      [0] 9         [1] (C, 8)
                    /         \         
                 [0] 5       [1] (B, 4)
             /         \         
        [0] (D, 3)    [1] (A, 2)

A -> 001 (부모 노드부터 읽음)
C -> 1
B -> 01
D -> 000

1000000100110110111101011000001
```

- <https://weicomes.tistory.com/36>
