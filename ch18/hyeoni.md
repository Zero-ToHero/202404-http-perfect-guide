# 18. 웹호스팅

### 호스팅 서비스
- 전문적인 서버 운영, 도메인 등록, 네트워크 대역폭 관리 등의 기술과 시간을 가진 업체들의 다양한 호스팅 서비스 제공. 이들은 물리적인 장비 관리부터 고객이 직접 콘텐츠를 제공할 수 있는 웹 호스팅까지 다양한 서비스 제공

### 가상 호스팅
- 가상 호스팅은 한 대의 컴퓨터를 여러 고객이 공유하여 저렴한 웹 호스팅 서비스 제공. 이를 공유 호스팅이라고도 함. 가상 호스팅은 비용 절감, 공간 효율성, 관리의 편리함 등의 이점 제공. 호스팅 업체는 여러 서버를 복제하여 부하를 분산시키고, 다수의 가상 웹사이트 호스팅 가능
#### 호스트 정보가 없는 가상 서버 요청
- HTTP/1.0 명세는 공용 웹 서버가 호스팅하는 가상 웹사이트에 누가 접근하는지 식별하는 기능 부재. 여러 요청이 동일한 문서를 요청하는 경우, 요청 자체가 동일한 형식으로 보임. HTTP 대리 서버(리버스 프락시)와 인터셉트 프락시는 어떤 사이트를 요청하는지 정보 필요.

#### 2.2 가상 호스팅을 동작하게 하기
- **URL 경로를 통한 가상 호스팅**: 서버가 어떤 사이트를 요청하는지 알 수 있도록 URL에 특별한 경로 컴포넌트 추가
  - 예: `GET joes/index.html`, `GET mary/index.html`
  - 그러나, URL 기반의 가상 호스팅은 일반적으로 비효율적인 방법
- **포트 번호를 통한 가상 호스팅**: 각 사이트에 다른 포트 번호를 할당하여 분리된 웹 서버 인스턴스가 요청을 처리하도록 설정
- 사용자는 URL에 비표준 포트를 사용하지 않고 리소스를 찾기 원함
- **IP 주소를 통한 가상 호스팅**: 각 가상 웹사이트에 고유한 IP 주소 할당
  - 모든 가상 서버의 IP 주소는 같은 공용 서버에 연결
  - 문제점: IP 주소의 제한, 가상 사이트가 많을 경우 충분한 IP 주소 확보의 어려움, 부하 균형을 위한 서버 복제 시 추가 IP 주소 필요
- **Host 헤더를 통한 가상 호스팅**: 모든 요청에 호스트명을 Host 확장 헤더에 기술하여 전달.

#### 2.3 HTTP/1.1 Host 헤더

가상 서버는 매우 일반적이므로 대부분의 HTTP 클라이언트가 HTTP/1.1과 호환되지 않더라도 Host 헤더 구현

```
Host = "Host" ":" 호스트[ ":" 포트 ]
```

### 3. 안정적인 웹 사이트 만들기
#### 3.1 미러링된 서버 팜
- 서버 팜은 서로 대체 가능하고 식별 가능한 웹 서버들의 집합. 서버 팜의 서버들은 한 곳에 문제가 생기면 다른 서버에서 대신 콘텐츠를 제공할 수 있도록 미러링 가능
- **HTTP 리다이렉션**: 콘텐츠 URL은 마스터 서버의 IP를 가리키고, 마스터 서버는 요청을 복제 서버로 리다이렉트
- **DNS 리다이렉션**: 콘텐츠 URL이 여러 IP 주소를 가리킬 수 있고, DNS 서버는 클라이언트에게 전송할 IP 주소 선택
#### 3.2 콘텐츠 분산 네트워크
- 콘텐츠 분산 네트워크(CDN)는 특정 콘텐츠를 분산시키기 위한 네트워크
#### 3.3 CDN의 대리 캐시
- 대리 서버는 콘텐츠 요청을 받아 원 서버 집합을 대신함
- **미러링된 서버와의 차이점**: 수요에 따라 동작하며, 원 서버의 전체 콘텐츠를 복사하지 않고 클라이언트가 요청하는 콘텐츠만 저장
#### 3.4 CDN의 프락시 캐시
- 프락시 캐시는 요청이 있을 때만 콘텐츠 저장하며, 원본 서버 콘텐츠를 정확히 복제하지 않음. 스위치나 라우터가 웹 트래픽을 가로채 처리
### 4. 웹 사이트 빠르게 만들기
- 콘텐츠를 분산시키면 사용자에게 더 가까운 위치에서 콘텐츠 제공 가능, 전송 시간 단축 가능. 이를 위해 콘텐츠 인코딩 필요

